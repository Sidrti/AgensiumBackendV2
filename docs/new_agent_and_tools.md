# New Agent and Tools Documentation

## Scope of Work - User Panel

## Agent 1: Customer Segmentation Agent

**Sr No.:** 1  
**Agent Name:** Customer Segmentation Agent  
**Description:** A dynamic segmentation engine that classifies customers into value based or behavior based segments using decile logic or RFM modeling, enabling targeted strategy and prioritization.

**Agent Input:**

- Transaction level customer dataset (CSV/Excel/API)
- Selected metric (Revenue, Gross Profit, Margin)
- Timeframe (YTD, Last 12 Months, Custom)
- Mode selection (Value or RFM)
- Segment count (2–10)
- RFM weights (Recency, Frequency, Monetary)

**Agent Output:**

- Segmented customer table with ranks
- Segment labels generated by agent
- Aggregate contribution metrics per segment
- Segment health indicators

**Components (UI):**

- Inputs:
  - a. Mode Toggle (Current Value / RFM)
  - b. Timeframe Dropdown
  - c. Metric Dropdown
  - d. Segment Count Slider (2–10)
  - e. RFM Weight Sliders (conditional)
- Outputs:
  - f. Ranked Bar Chart (color coded)
  - g. Donut Chart (cumulative contribution)
  - h. Segment Summary Panel

**Functionalities:**

- Automatically ranks customers based on selected logic
- Applies weighted RFM scoring when enabled
- Divides ranked customers into equal sized segments
- Generates human readable segment names (e.g., "High Value, Low Frequency")
- Calculates contribution share per segment
- Highlights top and bottom performing cohorts

**Backend:**

- Python Pandas based computation engine
- RFM scoring module with weight validation (sum = 100%)
- Rule based segment naming engine
- Aggregation service for contribution metrics
- JSON response formatter for charts and tables

**Example Workflow:**
You upload your sales data:

- Customer ID
- Order dates
- Revenue per order

You choose:

- Mode: RFM
- Timeframe: Last 12 months
- Segments: 5

The agent does the following automatically:

1. Calculates:
   - Recency: How recently they bought
   - Frequency: How often they buy
   - Monetary: How much they spend
2. Scores each customer
3. Groups them into segments like:
   - "Champions"
   - "Loyal Regulars"
   - "At Risk"
   - "Low Value"

---

## Agent 2: Market Basket & Sequence Agent

**Sr No.:** 2  
**Agent Name:** Market Basket & Sequence Agent  
**Description:** An association and sequence mining agent that identifies product co-purchase patterns and next purchase likelihoods to enable bundling, promotions, and intent prediction.

**Agent Input:**

- Transaction level purchase data
- Product identifiers
- Transaction timestamps
- Industry context (optional)
- Threshold parameters (Support, Confidence, Lift, Gap days)

**Agent Output:**

- Ranked association rules table
- Product relationship graph
- AI generated commercial recommendations
- Predicted next purchase intent

**Components (UI):**

- Inputs:
  - a. Industry Selector
  - b. Mode Switch (Within Basket / Cross Transaction)
  - c. Support Slider
  - d. Confidence Slider
  - e. Lift Slider
  - f. Gap Tolerance Slider (days)
- Outputs:
  - g. Ranked Metrics Table
  - h. Node Flow Graph (sequence mode)
  - i. Recommendation Panel

**Functionalities:**

- Detects frequent itemsets using association rules
- Mines purchase sequences across time windows
- Calculates Support, Confidence and Lift metrics
- Generates textual recommendations based on metric thresholds
- Predicts next best action or intent (e.g., "Fence construction")
- Explains metrics contextually for business users

**Backend:**

- Python mlxtend library (Apriori / FP Growth)
- Sequential Pattern Mining (GSP / SPADE)
- Recommendation rules engine based on Lift and Confidence thresholds
- Graph data formatter for visualization layer

**Example Workflow:**
Imagine a hardware store. You notice:

1. People buy paint
2. People buy brushes
3. But you do not know:
   - a. Which products go together naturally
   - b. What product comes next after a purchase

Within-Basket Mode

- Question it answers: "What is commonly bought in the same order?"
- Example Agent finds: Paint + Roller → Confidence 85 percent, Lift 4.2
- Meaning: 85 percent of people who buy paint also buy rollers
- Lift above 3 means this is a strong relationship

Cross-Transaction Mode

- Question it answers: "What do customers buy next, not in the same order?"
- Example Agent finds: Buy lumber → Next purchase within 14 days → Nails + Stain
- The agent then explains: "Likely intent: Building a fence"

---

## Agent 3: Experimental Design Agent

**Sr No.:** 3  
**Agent Name:** Experimental Design Agent  
**Description:** A statistical planning agent that calculates valid A/B test sample sizes using baseline conversion rate, minimum detectable lift, and significance level to prevent underpowered experiments.

**Agent Input:**

- Baseline conversion/response rate
- Minimum detectable lift (%)
- Desired significance level (90%, 95%, 99%)
- Optional total customer base size
- Optional dataset upload (primary)

**Agent Output:**

- Required control group size
- Required test group size
- Total sample size (N)
- Feasibility warning if audience is insufficient

**Components (UI):**

- Inputs:
  - a. Significance Level Dropdown
  - b. Baseline Rate Input
  - c. Min Detectable Lift Input
  - d. Optional Total Audience Size Input
- Outputs:
  - e. Control Group Size (Big Number)
  - f. Test Group Size (Big Number)
  - g. Total N Display
  - h. Validation Warning Banner

**Functionalities:**

- Performs two-tailed power analysis for proportions
- Calculates statistically valid sample sizes
- Compares required sample size against available audience
- Flags experiments that are not feasible
- Protects teams from underpowered tests and false conclusions

**Backend:**

- Python statsmodels power analysis implementation
- Evan Miller method logic wrapper
- Validation layer comparing dataset size vs required N
- Precision-controlled numeric output service

**Example Workflow:**
You want to test a new homepage:

- Current conversion rate: 2%
- Minimum improvement worth detecting: 5%
- Confidence level: 95%

The agent outputs:

1. Control group size: 18,000 users
2. Test group size: 18,000 users
3. Total N: 36,000 users
4. Feasibility warning if the audience is too small

---

## Agent 4: Synthetic Control Agent

**Sr No.:** 4  
**Agent Name:** Synthetic Control Agent  
**Description:** A causal inference agent that measures campaign impact when no randomized control group exists by constructing a statistically similar synthetic control population.

**Agent Input:**

- Target group dataset (exposed users) — uploaded as **primary**
- Universe dataset (non-exposed users) — uploaded as **baseline**
- Transaction history
- Time period definitions (pre, during, post)

**Agent Output:**

- Synthetic control time series
- Actual vs counterfactual comparison
- Incremental lift measurement
- Match confidence score

**Components (UI):**

- Inputs:
  - a. Target Group Upload
  - b. Universe Group Upload
  - c. Interactive Timeline Selector
- Outputs:
  - d. Dual Line Time Series Chart
  - e. Shaded Lift Delta Area
  - f. Match Confidence Score

**Functionalities:**

- Constructs a counterfactual performance baseline
- Automatically selects predictive matching features
- Measures true incremental impact of campaigns
- Visualizes divergence between actual and synthetic trends
- Quantifies lift with statistical confidence

**Backend:**

- Synthetic control / matching engine for counterfactuals
- Feature selection and normalization pipeline
- Time-series aggregation and comparison service
- Confidence scoring and diagnostics

**Example Workflow:**
A company runs a nationwide promotion with no control group.

Sales increase 12%. The CEO asks:
"Was it because of the campaign or because demand was rising anyway?"

The agent creates a synthetic control group by:

1. Studying customers before the promotion
2. Matching a similar non-exposed population
3. Comparing actual vs counterfactual trends
4. Quantifying incremental lift with confidence

---
